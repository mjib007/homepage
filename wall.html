<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>æ–°å¹´ç¥ˆç¦ç‰† ğŸ</title>
<script src="https://accounts.google.com/gsi/client" async defer></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700;900&family=Zen+Maru+Gothic:wght@400;500;700&display=swap" rel="stylesheet">
<style>
:root{--vermillion:#D1443A;--vermillion-dark:#A8302A;--gold:#C8A951;--gold-light:#E8D48B;--wood:#8B6914;--wood-dark:#5C4A1E;--cream:#FDF8EF;--ink:#2C1810;--ink-light:#5A3D2B;--rope:#D4A843;--paper:#FBF5E8;--shadow:rgba(44,24,16,0.15)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Noto Serif TC',serif;background:var(--cream);color:var(--ink);min-height:100vh;overflow-x:hidden;-webkit-tap-highlight-color:transparent}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(circle at 20% 50%,rgba(209,68,58,0.03) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(200,169,81,0.05) 0%,transparent 50%),radial-gradient(circle at 50% 80%,rgba(188,43,43,0.02) 0%,transparent 50%);pointer-events:none;z-index:0}
body::after{content:'';position:fixed;inset:0;opacity:0.02;background-image:url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M40 0L80 40L40 80L0 40Z' fill='none' stroke='%23BC2B2B' stroke-width='0.5'/%3E%3Cpath d='M40 0L40 80M0 40L80 40' fill='none' stroke='%23BC2B2B' stroke-width='0.3'/%3E%3C/svg%3E");pointer-events:none;z-index:0}

/* Torii Header */
.torii-header{position:relative;text-align:center;padding:36px 20px 24px;z-index:1}
.torii-gate{display:inline-block;position:relative;padding:0 50px}
.torii-gate::before{content:'';position:absolute;top:-8px;left:-16px;right:-16px;height:11px;background:var(--vermillion);border-radius:2px;box-shadow:0 2px 8px rgba(209,68,58,0.3)}
.torii-gate::after{content:'';position:absolute;top:20px;left:8px;right:8px;height:5px;background:var(--vermillion);border-radius:1px}
.torii-pillars{position:absolute;top:-12px;bottom:-10px;width:9px;background:var(--vermillion);border-radius:1px}
.torii-pillars.left{left:10px}.torii-pillars.right{right:10px}
.header-title{font-size:clamp(1.6rem,5vw,2.6rem);font-weight:900;letter-spacing:0.12em;padding-top:34px;position:relative;z-index:1}
.header-subtitle{font-family:'Zen Maru Gothic',sans-serif;font-size:clamp(0.75rem,2vw,0.95rem);color:var(--ink-light);margin-top:6px;letter-spacing:0.06em;position:relative;z-index:1}
.shimenawa{display:flex;align-items:center;justify-content:center;margin:8px auto 0;max-width:320px;gap:10px;position:relative;z-index:1}
.shimenawa-line{flex:1;height:2px;background:linear-gradient(90deg,transparent,var(--rope),transparent)}
.shimenawa-tassel{font-size:1.1rem;animation:sway 3s ease-in-out infinite}
@keyframes sway{0%,100%{transform:rotate(-3deg)}50%{transform:rotate(3deg)}}

/* Login */
.login-section{display:flex;flex-direction:column;align-items:center;padding:40px 20px;position:relative;z-index:1}
.login-card{background:var(--paper);border:1px solid var(--gold-light);border-radius:4px;padding:40px 32px;text-align:center;max-width:380px;width:100%;box-shadow:0 4px 20px var(--shadow),inset 0 0 60px rgba(200,169,81,0.05)}
.login-card::before{content:'â›©ï¸';font-size:2.2rem;display:block;margin-bottom:14px}
.login-card h2{font-size:1.3rem;font-weight:700;margin-bottom:6px}
.login-card p{font-family:'Zen Maru Gothic',sans-serif;font-size:0.85rem;color:var(--ink-light);margin-bottom:24px;line-height:1.6}
.google-btn{display:inline-flex;align-items:center;gap:10px;padding:12px 24px;background:#fff;border:2px solid #ddd;border-radius:6px;font-family:'Zen Maru Gothic',sans-serif;font-size:0.95rem;font-weight:500;color:#333;cursor:pointer;transition:all 0.2s;box-shadow:0 1px 4px rgba(0,0,0,0.1)}
.google-btn:hover{border-color:var(--gold);box-shadow:0 2px 8px rgba(200,169,81,0.2);transform:translateY(-1px)}
.google-btn:active{transform:translateY(0)}
.google-btn svg{width:20px;height:20px}

/* User Bar */
.user-bar{display:flex;align-items:center;justify-content:center;gap:12px;padding:10px 16px;background:rgba(251,245,232,0.92);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border-bottom:1px solid var(--gold-light);position:sticky;top:0;z-index:100}
.user-info{display:flex;align-items:center;gap:8px;font-family:'Zen Maru Gothic',sans-serif;font-size:0.82rem;color:var(--ink-light);min-width:0}
.user-info span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:140px}
.user-avatar{width:26px;height:26px;border-radius:50%;border:2px solid var(--gold-light);flex-shrink:0}
.btn-sm{padding:5px 14px;border:1px solid var(--gold);background:transparent;color:var(--ink-light);font-family:'Zen Maru Gothic',sans-serif;font-size:0.75rem;border-radius:4px;cursor:pointer;transition:all 0.2s;white-space:nowrap;flex-shrink:0}
.btn-sm:hover{background:var(--gold);color:#fff}
.btn-sm.danger{border-color:var(--vermillion);color:var(--vermillion)}
.btn-sm.danger:hover{background:var(--vermillion);color:#fff}

/* Ema Form */
.ema-form-section{display:flex;justify-content:center;padding:24px 16px 16px;position:relative;z-index:1}
.ema-form-card{position:relative;width:300px;min-height:190px;padding:26px 20px 18px;text-align:center;background:linear-gradient(135deg,#DEB668 0%,#C8A24A 15%,#DEB668 30%,#B8922A 50%,#D4AC5A 70%,#C8A24A 85%,#DEB668 100%);border-radius:4px;box-shadow:0 6px 20px rgba(92,74,30,0.25),inset 0 1px 0 rgba(255,255,255,0.2),inset 0 -2px 4px rgba(92,74,30,0.15);clip-path:polygon(0% 14%,50% 0%,100% 14%,100% 100%,0% 100%)}
.ema-form-card::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(90deg,transparent,transparent 8px,rgba(139,105,20,0.06) 8px,rgba(139,105,20,0.06) 9px);pointer-events:none;clip-path:polygon(0% 14%,50% 0%,100% 14%,100% 100%,0% 100%)}
.ema-form-card::after{content:'';position:absolute;top:16px;left:50%;transform:translateX(-50%);width:9px;height:9px;background:var(--cream);border-radius:50%;border:2px solid var(--wood-dark);box-shadow:inset 0 1px 2px rgba(0,0,0,0.2)}
.ema-form-label{font-size:0.85rem;font-weight:700;color:var(--wood-dark);margin-top:14px;margin-bottom:10px;text-shadow:0 1px 0 rgba(255,255,255,0.3)}
.ema-textarea{width:100%;height:60px;padding:8px 10px;border:none;border-radius:4px;background:rgba(255,255,255,0.45);font-family:'Noto Serif TC',serif;font-size:1rem;color:var(--ink);text-align:center;resize:none;line-height:1.5;outline:none;transition:background 0.3s}
.ema-textarea::placeholder{color:rgba(92,74,30,0.4);font-size:0.85rem}
.ema-textarea:focus{background:rgba(255,255,255,0.6)}
.char-count{font-family:'Zen Maru Gothic',sans-serif;font-size:0.7rem;color:var(--wood-dark);margin-top:4px;opacity:0.7}
.char-count.warn{color:var(--vermillion);opacity:1}
.ema-submit-btn{margin-top:8px;padding:7px 28px;background:var(--vermillion);color:#fff;border:none;border-radius:4px;font-family:'Noto Serif TC',serif;font-size:0.9rem;font-weight:700;cursor:pointer;letter-spacing:0.1em;transition:all 0.2s;box-shadow:0 2px 6px rgba(209,68,58,0.3)}
.ema-submit-btn:hover{background:var(--vermillion-dark);transform:translateY(-1px)}
.ema-submit-btn:active{transform:translateY(0)}
.ema-submit-btn:disabled{background:#aaa;cursor:not-allowed;box-shadow:none;transform:none}
.my-actions{text-align:center;margin-bottom:8px;position:relative;z-index:1}

/* æ–°å¢ï¼šå½©è‰²ç¹ªé¦¬ä¸»é¡Œ */
.ema-theme-gold { background: linear-gradient(145deg, #E8C96E, #D4B456, #C8A24A); }
.ema-theme-red { background: linear-gradient(145deg, #E58C86, #D1443A, #A8302A); }
.ema-theme-green { background: linear-gradient(145deg, #A8C69F, #7E9C75, #5A7053); }
.ema-theme-blue { background: linear-gradient(145deg, #93B5CF, #5B8AAD, #3E5E78); }
.ema-theme-purple { background: linear-gradient(145deg, #B296C7, #8A6DA3, #654E7A); }
.ema-theme-pink { background: linear-gradient(145deg, #F8C3CD, #E87A90, #D05A6E); }

/* æ·±è‰²èƒŒæ™¯æ™‚çš„æ–‡å­—é©æ‡‰ */
.ema-theme-red, .ema-theme-green, .ema-theme-blue, .ema-theme-purple, .ema-theme-pink { color: #fff; }
.ema-theme-red .ema-message, .ema-theme-green .ema-message, .ema-theme-blue .ema-message, .ema-theme-purple .ema-message, .ema-theme-pink .ema-message { 
    color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.3); 
}
.ema-theme-red .ema-author, .ema-theme-green .ema-author, .ema-theme-blue .ema-author, .ema-theme-purple .ema-author, .ema-theme-pink .ema-author { 
    color: rgba(255,255,255,0.85); 
}

/* Wall & Grid */
.wall-section{padding:8px 16px 50px;max-width:1000px;margin:0 auto;position:relative;z-index:1}
.wall-title{text-align:center;font-size:1.1rem;font-weight:700;color:var(--ink-light);margin-bottom:20px;letter-spacing:0.08em}
.wall-title span{display:inline-block;padding:0 18px;position:relative}
.wall-title span::before,.wall-title span::after{content:'âœ¦';position:absolute;top:50%;transform:translateY(-50%);color:var(--gold);font-size:0.6rem}
.wall-title span::before{left:0}.wall-title span::after{right:0}
.ema-rope{position:relative;padding-top:18px;margin-bottom:30px}
.ema-rope::before{content:'';position:absolute;top:0;left:0;right:0;height:5px;background:linear-gradient(180deg,var(--rope),#B8922A);border-radius:3px;box-shadow:0 2px 4px rgba(0,0,0,0.1)}
.ema-grid{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;padding-top:8px}

/* Ema Card */
.ema-card-wrapper{display:flex;flex-direction:column;align-items:center}
.ema-string{width:2px;height:18px;background:linear-gradient(180deg,var(--rope),var(--wood));margin-bottom:-2px}
.ema-card{position:relative;width:200px;min-height:148px;padding:22px 14px 14px;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:4px;box-shadow:0 4px 12px rgba(92,74,30,0.2),inset 0 1px 0 rgba(255,255,255,0.15);clip-path:polygon(0% 12%,50% 0%,100% 12%,100% 100%,0% 100%);animation:fadeHang 0.6s ease-out both;transition:transform 0.3s}
.ema-card:hover{transform:rotate(-1deg) translateY(-2px)}
.ema-card::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(95deg,transparent,transparent 6px,rgba(139,105,20,0.05) 6px,rgba(139,105,20,0.05) 7px);pointer-events:none;clip-path:polygon(0% 12%,50% 0%,100% 12%,100% 100%,0% 100%)}
.ema-card::after{content:'';position:absolute;top:12px;left:50%;transform:translateX(-50%);width:7px;height:7px;background:var(--cream);border-radius:50%;border:1.5px solid var(--wood-dark);box-shadow:inset 0 1px 2px rgba(0,0,0,0.15)}
.ema-message{font-size:0.92rem;font-weight:700;color:var(--ink);line-height:1.55;margin-top:4px;word-break:break-word;text-shadow:0 0.5px 0 rgba(255,255,255,0.2)}
.ema-author{font-family:'Zen Maru Gothic',sans-serif;font-size:0.65rem;color:var(--wood-dark);margin-top:8px;opacity:0.7}
.ema-own-badge{position:absolute;bottom:5px;right:7px;font-size:0.5rem;font-family:'Zen Maru Gothic',sans-serif;opacity:0.85}

/* Animations & UI */
@keyframes fadeHang{from{opacity:0;transform:translateY(-16px) rotate(2deg)}to{opacity:1;transform:translateY(0) rotate(0deg)}}
.empty-state{text-align:center;padding:32px 20px;font-family:'Zen Maru Gothic',sans-serif;color:var(--ink-light);opacity:0.6}
.loading{text-align:center;padding:32px;z-index:1;position:relative}
.spinner{display:inline-block;width:28px;height:28px;border:3px solid var(--gold-light);border-top-color:var(--vermillion);border-radius:50%;animation:spin .8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(80px);padding:10px 24px;background:var(--ink);color:var(--cream);font-family:'Zen Maru Gothic',sans-serif;font-size:0.85rem;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,0.25);z-index:1000;opacity:0;transition:all 0.4s cubic-bezier(0.16,1,0.3,1);pointer-events:none;max-width:90vw;text-align:center}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

/* Mobile Adaptation */
@media(max-width:480px){
Â  .ema-grid{gap:12px}
Â  .ema-card{width:145px;min-height:118px;padding:16px 8px 10px}
Â  .ema-message{font-size:0.78rem}
}
</style>
</head>
<body>

<div id="petals-container"></div>
<div id="toast" class="toast"></div>

<div id="screen-login">
Â  <div class="torii-header">
Â  Â  <div class="torii-gate">
Â  Â  Â  <div class="torii-pillars left"></div>
Â  Â  Â  <div class="torii-pillars right"></div>
Â  Â  Â  <h1 class="header-title">æ–°å¹´ç¥ˆç¦ç‰†</h1>
Â  Â  Â  <p class="header-subtitle">æ›¸å¯«å¿ƒé¡˜ Â· ç¹«ä¸Šç¹ªé¦¬ Â· ç¥ˆé¡˜æˆå°±</p>
Â  Â  </div>
Â  </div>
Â  <div class="login-section">
Â  Â  <div class="login-card">
Â  Â  Â  <h2>ç™»å…¥ä»¥è¨±ä¸‹å¿ƒé¡˜</h2>
Â  Â  Â  <button class="google-btn" onclick="handleGoogleLogin()">
Â  Â  Â  Â  Google å¸³è™Ÿç™»å…¥
Â  Â  Â  </button>
Â  Â  </div>
Â  </div>
</div>

<div id="screen-main" class="hidden">
Â  <div class="user-bar">
Â  Â  <div class="user-info">
Â  Â  Â  <img id="user-avatar" class="user-avatar" src="" alt="">
Â  Â  Â  <span id="user-name"></span>
Â  Â  </div>
Â  Â  <button class="btn-sm danger" onclick="handleLogout()">ç™»å‡º</button>
Â  </div>

Â  <div class="ema-form-section">
Â  Â  <div class="ema-form-card">
Â  Â  Â  <div class="ema-form-label" id="form-label">å¯«ä¸‹æ‚¨çš„æ–°å¹´ç¥ç¦</div>
Â  Â  Â  <textarea id="blessing-input" class="ema-textarea" maxlength="30" placeholder="åœ¨æ­¤å¯«ä¸‹å¿ƒé¡˜..." oninput="handleInput()"></textarea>
Â  Â  Â  <div id="char-count" class="char-count">0 / 30</div>
Â  Â  Â  <button id="submit-btn" class="ema-submit-btn" onclick="handleSubmit()">ç¹«ä¸Šç¹ªé¦¬</button>
Â  Â  </div>
Â  </div>

Â  <div id="my-blessing-actions" class="my-actions hidden">
Â  Â  <button class="btn-sm danger" onclick="handleDelete()">ğŸ—‘ å–ä¸‹æˆ‘çš„ç¹ªé¦¬</button>
Â  </div>

Â  <div class="wall-section">
Â  Â  <div class="wall-title"><span>ç¹ªé¦¬ç¥ˆç¦ç‰†</span></div>
Â  Â  <div id="loading" class="loading"><div class="spinner"></div></div>
Â  Â  <div id="ema-wall" class="hidden">
Â  Â  Â  <div class="ema-rope">
Â  Â  Â  Â  <div id="ema-grid" class="ema-grid"></div>
Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div id="empty-state" class="empty-state hidden">
Â  Â  Â  <p>å°šç„¡ç¥ç¦ï¼Œæˆç‚ºç¬¬ä¸€ä½è¨±é¡˜çš„äººå§ï¼</p>
Â  Â  </div>
Â  </div>
</div>

<script>
const CONFIG={
Â  GOOGLE_CLIENT_ID:'973721313231-0no4ivldu33he0kts8k51kn4tqd979g7.apps.googleusercontent.com',
Â  API_AUTH:'https://mjib007.zeabur.app/webhook/auth-blessing',
Â  API_GET:'https://mjib007.zeabur.app/webhook/blessings-get',
Â  API_SAVE:'https://mjib007.zeabur.app/webhook/blessings-save',
Â  API_DELETE:'https://mjib007.zeabur.app/webhook/blessings-delete',
};
let currentUser=null,myBlessing=null;

// é…è‰²æ¸…å–®
const THEMES = ['ema-theme-gold', 'ema-theme-red', 'ema-theme-green', 'ema-theme-blue', 'ema-theme-purple', 'ema-theme-pink'];

async function loadBlessings(){
Â  const loading=document.getElementById('loading'),wall=document.getElementById('ema-wall'),grid=document.getElementById('ema-grid');
Â  loading.classList.remove('hidden');
Â  try{
Â  Â  const res=await fetch(CONFIG.API_GET),data=await res.json();
Â  Â  loading.classList.add('hidden');
Â  Â  if(!data.blessings||data.blessings.length===0){grid.innerHTML='';return}
Â  Â  grid.innerHTML='';
Â  Â  
Â  Â  data.blessings.forEach((b,i)=>{
Â  Â  Â  const isOwn=b.googleId===currentUser.googleId;
Â  Â  Â  if(isOwn)myBlessing=b;
Â  Â  Â  
Â  Â  Â  // é€™è£¡å¯¦ä½œå¤šé‡‡å¤šå§¿çš„é—œéµï¼šæ ¹æ“šç´¢å¼•å€¼å¾ªç’°é¸å–é¡è‰²
Â  Â  Â  const themeClass = THEMES[i % THEMES.length];

Â  Â  Â  const w=document.createElement('div');
Â  Â  Â  w.className='ema-card-wrapper';
Â  Â  Â  w.innerHTML=`
Â  Â  Â  Â  <div class="ema-string"></div>
Â  Â  Â  Â  <div class="ema-card ${themeClass}" style="animation-delay:${i*0.08}s">
Â  Â  Â  Â  Â  <div class="ema-message">${escapeHtml(b.message)}</div>
Â  Â  Â  Â  Â  <div class="ema-author">â€” ${escapeHtml(b.displayName)}</div>
Â  Â  Â  Â  Â  ${isOwn?'<div class="ema-own-badge">âœ¦ æˆ‘çš„ç¹ªé¦¬</div>':''}
Â  Â  Â  Â  </div>`;
Â  Â  Â  grid.appendChild(w);
Â  Â  });
Â  Â  wall.classList.remove('hidden');
Â  Â  updateFormState();
Â  }catch(e){console.error(e)}
}

// ç™»å…¥ç›¸é—œ
function initGoogleLogin(){
Â  if(typeof google==='undefined'){setTimeout(initGoogleLogin,300);return}
Â  google.accounts.id.initialize({client_id:CONFIG.GOOGLE_CLIENT_ID,callback:onGoogleCredential});
}
function handleGoogleLogin(){
Â  google.accounts.id.prompt();
}
function onGoogleCredential(r){
Â  const p=parseJwt(r.credential);
Â  loginWithProfile({googleId:p.sub,displayName:p.name,email:p.email,photoUrl:p.picture});
}
function parseJwt(t){
Â  const b=t.split('.')[1].replace(/-/g,'+').replace(/_/g,'/');
Â  return JSON.parse(decodeURIComponent(atob(b).split('').map(c=>'%'+('00'+c.charCodeAt(0).toString(16)).slice(-2)).join('')));
}
async function loginWithProfile(profile){
Â  currentUser=profile;
Â  sessionStorage.setItem('user',JSON.stringify(currentUser));
Â  try{await fetch(CONFIG.API_AUTH,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(profile)})}catch(e){}
Â  showMainScreen();
}
function handleLogout(){
Â  currentUser=null;sessionStorage.removeItem('user');
Â  document.getElementById('screen-login').classList.remove('hidden');
Â  document.getElementById('screen-main').classList.add('hidden');
}
async function showMainScreen(){
Â  document.getElementById('screen-login').classList.add('hidden');
Â  document.getElementById('screen-main').classList.remove('hidden');
Â  document.getElementById('user-name').textContent=currentUser.displayName;
Â  const a=document.getElementById('user-avatar');
Â  if(currentUser.photoUrl){a.src=currentUser.photoUrl;a.style.display=''}else{a.style.display='none'}
Â  await loadBlessings();
}

// è¡¨å–®æ“ä½œ
function updateFormState(){
Â  const input=document.getElementById('blessing-input'),btn=document.getElementById('submit-btn'),actions=document.getElementById('my-blessing-actions');
Â  if(myBlessing){input.value=myBlessing.message;btn.textContent='ä¿®æ”¹ç¹ªé¦¬';actions.classList.remove('hidden')}
Â  else{input.value='';btn.textContent='ç¹«ä¸Šç¹ªé¦¬';actions.classList.add('hidden')}
}
function handleInput(){
Â  const i=document.getElementById('blessing-input');
Â  i.value=i.value.replace(/[\r\n]/g,'');
Â  document.getElementById('char-count').textContent = i.value.length + ' / 30';
}
async function handleSubmit(){
Â  const msg=document.getElementById('blessing-input').value.trim();
Â  if(!msg)return;
Â  try{
Â  Â  await fetch(CONFIG.API_SAVE,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({googleId:currentUser.googleId,displayName:currentUser.displayName,message:msg})});
Â  Â  showToast('æˆåŠŸï¼');await loadBlessings();
Â  }catch(e){}
}
async function handleDelete(){
Â  if(!confirm('ç¢ºå®šå–ä¸‹å—ï¼Ÿ'))return;
Â  try{
Â  Â  await fetch(CONFIG.API_DELETE,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({googleId:currentUser.googleId})});
Â  Â  myBlessing=null;await loadBlessings();
Â  }catch(e){}
}

// è¼”åŠ©åŠŸèƒ½
function showToast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2000)}
function escapeHtml(t){const d=document.createElement('div');d.textContent=t;return d.innerHTML}
function createPetals(){
Â  const c=document.getElementById('petals-container');
Â  for(let i=0;i<10;i++){
Â  Â  const p=document.createElement('div');p.className='petal';p.style.left=Math.random()*100+'vw';
Â  Â  p.style.animationDuration=(7+Math.random()*8)+'s';p.style.animationDelay=(Math.random()*10)+'s';
Â  Â  c.appendChild(p);
Â  }
}
window.addEventListener('DOMContentLoaded',()=>{
Â  createPetals();initGoogleLogin();
Â  const s=sessionStorage.getItem('user');
Â  if(s){currentUser=JSON.parse(s);showMainScreen()}
});
</script>
</body>
</html>
