<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– æ™ºèƒ½è‹±æ–‡å¯«ä½œåŠ©æ‰‹ - æ¸¬è©¦ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: #667eea;
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .demo-area {
            padding: 40px;
        }

        .writing-container {
            position: relative;
            margin-bottom: 30px;
        }

        .writing-textarea {
            width: 100%;
            min-height: 300px;
            padding: 20px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 16px;
            line-height: 1.6;
            resize: vertical;
            font-family: 'Georgia', 'Times New Roman', serif;
            transition: border-color 0.3s ease;
        }

        .writing-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .suggestions-container {
            position: absolute;
            top: 100%;
            left: 20px;
            right: 20px;
            background: white;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .suggestion-item {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f8f9fa;
            transition: background-color 0.2s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .suggestion-item:hover {
            background-color: #f8f9fa;
        }

        .suggestion-item.selected {
            background-color: #667eea;
            color: white;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-text {
            font-weight: 500;
        }

        .suggestion-type {
            font-size: 0.8rem;
            color: #6c757d;
            background: #e9ecef;
            padding: 2px 8px;
            border-radius: 12px;
        }

        .suggestion-item.selected .suggestion-type {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border-left: 4px solid #667eea;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
        }

        .btn-secondary {
            background: #e9ecef;
            color: #495057;
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        .settings-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .settings-panel h3 {
            margin-bottom: 15px;
            color: #495057;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
            background: #ccc;
            border-radius: 13px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: #667eea;
        }

        .toggle-switch::before {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active::before {
            transform: translateX(24px);
        }

        .loading-indicator {
            display: none;
            text-align: center;
            padding: 15px;
            color: #6c757d;
            font-style: italic;
        }

        .loading-indicator.show {
            display: block;
        }

        .demo-text {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2196f3;
        }

        .demo-text h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .hint {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            color: #856404;
            margin-bottom: 20px;
        }

        .performance-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #28a745;
            font-size: 0.9rem;
        }

        .response-time {
            color: #28a745;
            font-weight: bold;
        }

        .word-count {
            text-align: right;
            color: #6c757d;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .demo-area {
                padding: 20px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .performance-indicator {
                position: static;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="performance-indicator" id="performanceIndicator">
        <div>å›æ‡‰æ™‚é–“: <span class="response-time" id="responseTime">--</span></div>
        <div>å»ºè­°ä¾†æº: <span id="suggestionSource">æœ¬åœ°</span></div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ğŸ¤– æ™ºèƒ½è‹±æ–‡å¯«ä½œåŠ©æ‰‹</h1>
            <p>æ¸¬è©¦ç‰ˆ - å³æ™‚å¯«ä½œå»ºè­°ç³»çµ±</p>
        </div>

        <div class="demo-area">
            <div class="demo-text">
                <h4>ğŸ“ æ¸¬è©¦èªªæ˜</h4>
                <p>é–‹å§‹è¼¸å…¥è‹±æ–‡ä½œæ–‡ï¼Œç³»çµ±æœƒå³æ™‚æä¾›å¯«ä½œå»ºè­°ã€‚å˜—è©¦è¼¸å…¥ "I think"ã€"On the other"ã€"In my opinion" ç­‰é–‹é ­ï¼Œçœ‹çœ‹å»ºè­°æ•ˆæœï¼</p>
            </div>

            <div class="hint">
                <strong>ğŸ’¡ ä½¿ç”¨æŠ€å·§ï¼š</strong> è¼¸å…¥å¾Œç¨ç­‰ç‰‡åˆ»ï¼Œæˆ–æŒ‰ç©ºç™½éµè§¸ç™¼å»ºè­°ã€‚ä½¿ç”¨æ–¹å‘éµé¸æ“‡å»ºè­°ï¼ŒæŒ‰Enterç¢ºèªã€‚
            </div>

            <div class="settings-panel">
                <h3>âš™ï¸ åŠŸèƒ½è¨­å®š</h3>
                <div class="setting-item">
                    <label>å•Ÿç”¨æ™ºèƒ½å»ºè­°</label>
                    <div class="toggle-switch active" onclick="toggleSetting('smartSuggestions')" id="smartSuggestionsToggle"></div>
                </div>
                <div class="setting-item">
                    <label>è‡ªå‹•è§¸ç™¼å»ºè­°</label>
                    <div class="toggle-switch active" onclick="toggleSetting('autoTrigger')" id="autoTriggerToggle"></div>
                </div>
                <div class="setting-item">
                    <label>é¡¯ç¤ºå»ºè­°é¡å‹</label>
                    <div class="toggle-switch active" onclick="toggleSetting('showTypes')" id="showTypesToggle"></div>
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" onclick="clearText()">ğŸ—‘ï¸ æ¸…ç©ºæ–‡å­—</button>
                <button class="btn btn-secondary" onclick="loadDemoText()">ğŸ“„ è¼‰å…¥ç¯„ä¾‹</button>
                <button class="btn btn-secondary" onclick="showStatistics()">ğŸ“Š æŸ¥çœ‹çµ±è¨ˆ</button>
                <button class="btn btn-secondary" onclick="exportSettings()">âš™ï¸ åŒ¯å‡ºè¨­å®š</button>
            </div>

            <div class="writing-container">
                <textarea 
                    class="writing-textarea" 
                    id="writingArea" 
                    placeholder="é–‹å§‹è¼¸å…¥æ‚¨çš„è‹±æ–‡ä½œæ–‡...ä¾‹å¦‚ï¼šI think that technology has changed our lives in many ways..."
                    oninput="handleInput()"
                    onkeydown="handleKeyDown(event)"
                ></textarea>
                
                <div class="suggestions-container" id="suggestionsContainer">
                    <div class="loading-indicator" id="loadingIndicator">
                        ğŸ¤– AI æ­£åœ¨æ€è€ƒå»ºè­°...
                    </div>
                </div>
                
                <div class="word-count" id="wordCount">å­—æ•¸: 0</div>
            </div>

            <div class="stats-container" id="statsContainer">
                <div class="stat-card">
                    <div class="stat-number" id="totalSuggestions">0</div>
                    <div class="stat-label">ç¸½å»ºè­°æ•¸</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="acceptedSuggestions">0</div>
                    <div class="stat-label">å·²æ¡ç”¨å»ºè­°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgResponseTime">0ms</div>
                    <div class="stat-label">å¹³å‡å›æ‡‰æ™‚é–“</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="currentWPM">0</div>
                    <div class="stat-label">æ¯åˆ†é˜å­—æ•¸</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨åŸŸè®Šæ•¸
        let settings = {
            smartSuggestions: true,
            autoTrigger: true,
            showTypes: true
        };
        
        let statistics = {
            totalSuggestions: 0,
            acceptedSuggestions: 0,
            responseTimes: [],
            startTime: Date.now()
        };
        
        let currentSuggestions = [];
        let selectedIndex = -1;
        let lastInputTime = Date.now();
        let isRequestPending = false;

        // æœ¬åœ°å»ºè­°è³‡æ–™åº« - å³æ™‚å›æ‡‰
        const localSuggestions = {
            "i think": [
                {text: "that", type: "é€£æ¥è©"},
                {text: "it is important", type: "ç‰‡èª"},
                {text: "we should", type: "å»ºè­°å¥å‹"},
                {text: "about", type: "ä»‹è©"}
            ],
            "on the other": [
                {text: "hand", type: "æ…£ç”¨èª"},
                {text: "side", type: "åè©"}
            ],
            "in my opinion": [
                {text: ",", type: "æ¨™é»"},
                {text: "it is", type: "å¥å‹"},
                {text: "we need to", type: "è¡¨é”"}
            ],
            "in conclusion": [
                {text: ",", type: "æ¨™é»"},
                {text: "we can see that", type: "ç¸½çµå¥å‹"},
                {text: "it is clear that", type: "ç¸½çµå¥å‹"},
                {text: "I believe", type: "è§€é»è¡¨é”"}
            ],
            "for example": [
                {text: ",", type: "æ¨™é»"},
                {text: "when", type: "æ™‚é–“é€£æ¥è©"},
                {text: "if", type: "æ¢ä»¶é€£æ¥è©"},
                {text: "we can see", type: "å¥å‹"}
            ],
            "furthermore": [
                {text: ",", type: "æ¨™é»"},
                {text: "it is worth noting", type: "è£œå……å¥å‹"},
                {text: "we should consider", type: "å»ºè­°å¥å‹"}
            ],
            "however": [
                {text: ",", type: "æ¨™é»"},
                {text: "it is important to note", type: "è½‰æŠ˜å¥å‹"},
                {text: "we must consider", type: "å¼·èª¿å¥å‹"}
            ],
            "moreover": [
                {text: ",", type: "æ¨™é»"},
                {text: "this", type: "æŒ‡ç¤ºè©"},
                {text: "it", type: "ä»£è©"}
            ]
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateWordCount();
            updateStatistics();
        });

        // è™•ç†è¼¸å…¥
        function handleInput() {
            const textarea = document.getElementById('writingArea');
            const text = textarea.value;
            
            updateWordCount();
            
            if (!settings.autoTrigger) return;
            
            // é˜²æŠ–è™•ç†
            clearTimeout(window.inputTimeout);
            window.inputTimeout = setTimeout(() => {
                const cursorPosition = textarea.selectionStart;
                const textBeforeCursor = text.substring(0, cursorPosition);
                const lastWords = getLastWords(textBeforeCursor, 3);
                
                if (shouldTriggerSuggestions(lastWords)) {
                    getSuggestions(lastWords);
                } else {
                    hideSuggestions();
                }
            }, 300);
        }

        // è™•ç†éµç›¤äº‹ä»¶
        function handleKeyDown(event) {
            const suggestionsContainer = document.getElementById('suggestionsContainer');
            
            if (suggestionsContainer.style.display === 'none') return;
            
            switch(event.key) {
                case 'ArrowDown':
                    event.preventDefault();
                    selectedIndex = Math.min(selectedIndex + 1, currentSuggestions.length - 1);
                    updateSuggestionSelection();
                    break;
                    
                case 'ArrowUp':
                    event.preventDefault();
                    selectedIndex = Math.max(selectedIndex - 1, -1);
                    updateSuggestionSelection();
                    break;
                    
                case 'Enter':
                    if (selectedIndex >= 0) {
                        event.preventDefault();
                        acceptSuggestion(selectedIndex);
                    }
                    break;
                    
                case 'Escape':
                    hideSuggestions();
                    break;
                    
                case ' ':
                    // ç©ºç™½éµæ‰‹å‹•è§¸ç™¼å»ºè­°
                    setTimeout(() => {
                        const textarea = document.getElementById('writingArea');
                        const cursorPosition = textarea.selectionStart;
                        const textBeforeCursor = textarea.value.substring(0, cursorPosition);
                        const lastWords = getLastWords(textBeforeCursor, 3);
                        getSuggestions(lastWords);
                    }, 50);
                    break;
            }
        }

        // ç²å–æœ€å¾Œå¹¾å€‹å–®è©
        function getLastWords(text, count) {
            const words = text.toLowerCase().trim().split(/\s+/);
            return words.slice(-count).join(' ');
        }

        // åˆ¤æ–·æ˜¯å¦æ‡‰è©²è§¸ç™¼å»ºè­°
        function shouldTriggerSuggestions(lastWords) {
            if (!settings.smartSuggestions) return false;
            
            // æª¢æŸ¥æ˜¯å¦æœ‰åŒ¹é…çš„æœ¬åœ°å»ºè­°
            for (let key in localSuggestions) {
                if (lastWords.includes(key)) {
                    return true;
                }
            }
            
            // å…¶ä»–è§¸ç™¼æ¢ä»¶
            return lastWords.length > 2;
        }

        // ç²å–å»ºè­°
        function getSuggestions(triggerText) {
            if (isRequestPending) return;
            
            const startTime = Date.now();
            
            // é¦–å…ˆé¡¯ç¤ºæœ¬åœ°å»ºè­°ï¼ˆå³æ™‚ï¼‰
            const localResults = getLocalSuggestions(triggerText);
            if (localResults.length > 0) {
                displaySuggestions(localResults);
                updatePerformanceIndicator(Date.now() - startTime, 'æœ¬åœ°');
            }
            
            // ç„¶å¾Œç²å–AIå»ºè­°ï¼ˆå¦‚æœå•Ÿç”¨ï¼‰
            if (settings.smartSuggestions) {
                getAISuggestions(triggerText, startTime);
            }
        }

        // ç²å–æœ¬åœ°å»ºè­°
        function getLocalSuggestions(triggerText) {
            const suggestions = [];
            
            for (let key in localSuggestions) {
                if (triggerText.toLowerCase().includes(key)) {
                    suggestions.push(...localSuggestions[key]);
                    break; // åªå–ç¬¬ä¸€å€‹åŒ¹é…
                }
            }
            
            return suggestions;
        }

        // ç²å–AIå»ºè­°ï¼ˆæ¨¡æ“¬APIèª¿ç”¨ï¼‰
        function getAISuggestions(triggerText, startTime) {
            isRequestPending = true;
            showLoadingIndicator();
            
            // æ¨¡æ“¬APIå»¶é²
            setTimeout(() => {
                const aiSuggestions = generateMockAISuggestions(triggerText);
                const responseTime = Date.now() - startTime;
                
                // åˆä½µæœ¬åœ°å’ŒAIå»ºè­°
                const allSuggestions = [...getLocalSuggestions(triggerText), ...aiSuggestions];
                const uniqueSuggestions = removeDuplicates(allSuggestions);
                
                displaySuggestions(uniqueSuggestions.slice(0, 5)); // æœ€å¤šé¡¯ç¤º5å€‹
                hideLoadingIndicator();
                updatePerformanceIndicator(responseTime, 'AI+æœ¬åœ°');
                
                statistics.responseTimes.push(responseTime);
                isRequestPending = false;
            }, Math.random() * 1000 + 500); // 0.5-1.5ç§’éš¨æ©Ÿå»¶é²
        }

        // ç”Ÿæˆæ¨¡æ“¬AIå»ºè­°
        function generateMockAISuggestions(triggerText) {
            const mockSuggestions = [
                {text: "is crucial for", type: "AIå»ºè­°"},
                {text: "plays an important role", type: "AIå»ºè­°"},
                {text: "has a significant impact", type: "AIå»ºè­°"},
                {text: "should be considered", type: "AIå»ºè­°"}
            ];
            
            // æ ¹æ“šè§¸ç™¼æ–‡å­—è¿”å›ç›¸é—œå»ºè­°
            return mockSuggestions.slice(0, 2 + Math.floor(Math.random() * 3));
        }

        // ç§»é™¤é‡è¤‡å»ºè­°
        function removeDuplicates(suggestions) {
            const seen = new Set();
            return suggestions.filter(suggestion => {
                if (seen.has(suggestion.text)) {
                    return false;
                }
                seen.add(suggestion.text);
                return true;
            });
        }

        // é¡¯ç¤ºå»ºè­°
        function displaySuggestions(suggestions) {
            currentSuggestions = suggestions;
            selectedIndex = -1;
            
            const container = document.getElementById('suggestionsContainer');
            const loadingIndicator = document.getElementById('loadingIndicator');
            
            // æ¸…ç©ºç¾æœ‰å»ºè­°
            Array.from(container.children).forEach(child => {
                if (child !== loadingIndicator) {
                    container.removeChild(child);
                }
            });
            
            if (suggestions.length === 0) {
                hideSuggestions();
                return;
            }
            
            suggestions.forEach((suggestion, index) => {
                const item = document.createElement('div');
                item.className = 'suggestion-item';
                item.onclick = () => acceptSuggestion(index);
                
                item.innerHTML = `
                    <span class="suggestion-text">${suggestion.text}</span>
                    ${settings.showTypes ? `<span class="suggestion-type">${suggestion.type}</span>` : ''}
                `;
                
                container.appendChild(item);
            });
            
            container.style.display = 'block';
            statistics.totalSuggestions += suggestions.length;
            updateStatistics();
        }

        // æ¥å—å»ºè­°
        function acceptSuggestion(index) {
            const suggestion = currentSuggestions[index];
            const textarea = document.getElementById('writingArea');
            const cursorPosition = textarea.selectionStart;
            
            // æ’å…¥å»ºè­°æ–‡å­—
            const textBefore = textarea.value.substring(0, cursorPosition);
            const textAfter = textarea.value.substring(cursorPosition);
            
            // å¦‚æœå»ºè­°æ˜¯æ¨™é»ç¬¦è™Ÿï¼Œç›´æ¥æ’å…¥ï¼›å¦å‰‡å‰é¢åŠ ç©ºæ ¼
            const insertText = suggestion.text === ',' ? suggestion.text : ' ' + suggestion.text;
            
            textarea.value = textBefore + insertText + textAfter;
            textarea.selectionStart = textarea.selectionEnd = cursorPosition + insertText.length;
            
            hideSuggestions();
            statistics.acceptedSuggestions++;
            updateStatistics();
            updateWordCount();
            
            textarea.focus();
        }

        // æ›´æ–°å»ºè­°é¸æ“‡
        function updateSuggestionSelection() {
            const items = document.querySelectorAll('.suggestion-item');
            items.forEach((item, index) => {
                item.classList.toggle('selected', index === selectedIndex);
            });
        }

        // éš±è—å»ºè­°
        function hideSuggestions() {
            document.getElementById('suggestionsContainer').style.display = 'none';
            selectedIndex = -1;
        }

        // é¡¯ç¤ºè¼‰å…¥æŒ‡ç¤ºå™¨
        function showLoadingIndicator() {
            document.getElementById('loadingIndicator').classList.add('show');
        }

        // éš±è—è¼‰å…¥æŒ‡ç¤ºå™¨
        function hideLoadingIndicator() {
            document.getElementById('loadingIndicator').classList.remove('show');
        }

        // æ›´æ–°æ€§èƒ½æŒ‡ç¤ºå™¨
        function updatePerformanceIndicator(responseTime, source) {
            document.getElementById('responseTime').textContent = responseTime + 'ms';
            document.getElementById('suggestionSource').textContent = source;
        }

        // æ›´æ–°å­—æ•¸çµ±è¨ˆ
        function updateWordCount() {
            const text = document.getElementById('writingArea').value;
            const wordCount = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
            document.getElementById('wordCount').textContent = `å­—æ•¸: ${wordCount}`;
            
            // è¨ˆç®—æ¯åˆ†é˜å­—æ•¸
            const elapsedMinutes = (Date.now() - statistics.startTime) / 60000;
            const wpm = elapsedMinutes > 0 ? Math.round(wordCount / elapsedMinutes) : 0;
            document.getElementById('currentWPM').textContent = wpm;
        }

        // æ›´æ–°çµ±è¨ˆæ•¸æ“š
        function updateStatistics() {
            document.getElementById('totalSuggestions').textContent = statistics.totalSuggestions;
            document.getElementById('acceptedSuggestions').textContent = statistics.acceptedSuggestions;
            
            if (statistics.responseTimes.length > 0) {
                const avgTime = Math.round(
                    statistics.responseTimes.reduce((a, b) => a + b) / statistics.responseTimes.length
                );
                document.getElementById('avgResponseTime').textContent = avgTime + 'ms';
            }
        }

        // åˆ‡æ›è¨­å®š
        function toggleSetting(settingName) {
            settings[settingName] = !settings[settingName];
            document.getElementById(settingName + 'Toggle').classList.toggle('active', settings[settingName]);
            
            if (settingName === 'smartSuggestions' && !settings[settingName]) {
                hideSuggestions();
            }
        }

        // æ¸…ç©ºæ–‡å­—
        function clearText() {
            if (confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰æ–‡å­—å—ï¼Ÿ')) {
                document.getElementById('writingArea').value = '';
                updateWordCount();
                hideSuggestions();
                statistics.startTime = Date.now();
            }
        }

        // è¼‰å…¥ç¯„ä¾‹æ–‡å­—
        function loadDemoText() {
            const demoText = `I think that technology has changed our lives in many ways. On the other hand, some people believe that we rely too much on technology. In my opinion, we need to find a balance between using technology and maintaining human connections.

Furthermore, technology has made communication easier and faster. However, it has also created new challenges for society. For example, social media can help people stay connected, but it can also lead to addiction and mental health problems.

In conclusion, while technology brings many benefits, we must use it wisely and responsibly.`;
            
            document.getElementById('writingArea').value = demoText;
            updateWordCount();
        }

        // é¡¯ç¤ºçµ±è¨ˆ
        function showStatistics() {
            const acceptanceRate = statistics.totalSuggestions > 0 ? 
                Math.round((statistics.acceptedSuggestions / statistics.totalSuggestions) * 100) : 0;
                
            alert(`ğŸ“Š ä½¿ç”¨çµ±è¨ˆï¼š
            
â€¢ ç¸½å»ºè­°æ•¸ï¼š${statistics.totalSuggestions}
â€¢ å·²æ¡ç”¨å»ºè­°ï¼š${statistics.acceptedSuggestions}
â€¢ æ¡ç”¨ç‡ï¼š${acceptanceRate}%
â€¢ å¹³å‡å›æ‡‰æ™‚é–“ï¼š${statistics.responseTimes.length > 0 ? Math.round(statistics.responseTimes.reduce((a,b) => a+b) / statistics.responseTimes.length) : 0}ms
â€¢ ä½¿ç”¨æ™‚é–“ï¼š${Math.round((Date.now() - statistics.startTime) / 60000)}åˆ†é˜`);
        }

        // åŒ¯å‡ºè¨­å®š
        function exportSettings() {
            const config = {
                settings: settings,
                statistics: {
                    ...statistics,
                    sessionDuration: Date.now() - statistics.startTime
                }
            };
            
            const blob = new Blob([JSON.stringify(config, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `writing-assistant-config-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // é»æ“Šå¤–éƒ¨éš±è—å»ºè­°
        document.addEventListener('click', function(event) {
            const suggestionsContainer = document.getElementById('suggestionsContainer');
            const writingArea = document.getElementById('writingArea');
            
            if (!suggestionsContainer.contains(event.target) && event.target !== writingArea) {
                hideSuggestions();
            }
        });
    </script>
</body>
</html>